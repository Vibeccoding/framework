<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognizant Neuro AI Transition Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        .container { display: grid; grid-template-columns: 250px 1fr; height: 100vh; }
        .sidebar { background: #2c3e50; color: white; padding: 20px; }
        .sidebar h2 { margin-bottom: 20px; font-size: 16px; }
        .nav-item { padding: 10px; margin: 5px 0; cursor: pointer; border-radius: 4px; font-size: 14px; }
        .nav-item:hover, .nav-item.active { background: #34495e; }
        .main { padding: 20px; overflow-y: auto; }
        .module { display: none; }
        .module.active { display: block; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .card h3 { color: #2c3e50; margin-bottom: 15px; }
        .metric { display: flex; justify-content: space-between; margin: 10px 0; }
        .metric-value { font-weight: bold; color: #27ae60; }
        .status { padding: 4px 8px; border-radius: 4px; font-size: 12px; }
        .status-green { background: #d4edda; color: #155724; }
        .status-yellow { background: #fff3cd; color: #856404; }
        .status-red { background: #f8d7da; color: #721c24; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { background: #f8f9fa; font-weight: 600; }
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .kpi-card { background: white; padding: 15px; border-radius: 6px; text-align: center; border-left: 4px solid #007bff; }
        .kpi-value { font-size: 24px; font-weight: bold; color: #007bff; }
        .kpi-label { font-size: 12px; color: #6c757d; margin-top: 5px; }
        .chart-container { background: white; padding: 20px; border-radius: 8px; margin: 20px 0; height: 400px; }
        .btn { background: #007bff; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #0056b3; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 20px 0; }
        .stat-item { background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center; }
        .stat-number { font-size: 20px; font-weight: bold; color: #007bff; }
        .stat-label { font-size: 12px; color: #6c757d; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { background: white; margin: 50px auto; padding: 20px; width: 80%; max-width: 600px; border-radius: 8px; }
        .close { float: right; font-size: 24px; cursor: pointer; }
        .api-result { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; }
        .form-group { margin: 15px 0; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .ai-agent-chat { background: #f9f9f9; padding: 10px; border-radius: 4px; max-height: 300px; overflow-y: auto; margin-bottom: 10px; }
        .ai-message { margin: 5px 0; }
        .user-message { margin: 5px 0; text-align: right; }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="font-size: 14px;">Cognizant Neuro AI Transition Platform</h2>
                <button class="btn" onclick="logout()" style="padding: 5px 10px; font-size: 12px; background: #dc3545;">Logout</button>
            </div>
            <div id="userInfo" style="margin-bottom: 15px; padding: 10px; background: #34495e; border-radius: 4px; font-size: 12px;"></div>
            <div class="nav-item active" onclick="showModule('dashboard')">Dashboard</div>
            <div class="nav-item" onclick="showModule('due-diligence')">Due Diligence</div>
            <div class="nav-item" onclick="showModule('knowledge-acquisition')">Knowledge Acquisition</div>
            <div class="nav-item" onclick="showModule('shadow')">Shadow & Reverse Shadow</div>
            <div class="nav-item" onclick="showModule('stabilization')">Stabilization</div>
            <div class="nav-item" onclick="showModule('steady-support')">Steady Support</div>
            <div class="nav-item" onclick="showModule('reports')">Reports</div>
            <div class="nav-item" onclick="showModule('client-survey')">Client Survey</div>
            <div class="nav-item" onclick="showModule('api-endpoints')">API Endpoints</div>
            <div class="nav-item" onclick="showModule('data-cleaning')">Data Cleaning</div>
        </div>
        
        <div class="main">
            <!-- Dashboard Module -->
            <div id="dashboard" class="module active">
                <div class="dashboard-header" style="display: flex; flex-wrap: wrap; gap: 24px; align-items: flex-start; margin-bottom: 24px;">
                    <!-- Phase Progress Card -->
                    <div class="card" style="flex: 1 1 320px; min-width: 320px; max-width: 400px;">
                        <h3>Transition Phases Progress</h3>
                        <canvas id="phaseChart" height="180"></canvas>
                    </div>
                    <!-- AI Insights Card -->
                    <div class="card" style="flex: 2 1 400px; min-width: 340px;">
                        <h3>AI Insights</h3>
                        <div id="aiPhaseInsights" style="font-size: 1.1em; color: #333; margin-bottom: 10px;"></div>
                        <button class="btn" onclick="refreshPhaseAIInsights()">Refresh Insights</button>
                    </div>
                </div>
                <div class="stats-grid">
                </div>
                <div class="dashboard-grid">
                </div>
            </div>

            <!-- Due Diligence Module -->
            <div id="due-diligence" class="module">
                <!-- Agentic AI Chat Assistant (moved to top) -->
                <div class="card">
                    <h3>Agentic AI Assistant</h3>
                    <div id="aiAgentChat" style="height: 180px; overflow-y: auto; background: #f8f9fa; padding: 10px; border-radius: 6px; margin-bottom: 10px;"></div>
                    <div style="display: flex; gap: 8px;">
                        <input id="aiAgentInput" type="text" placeholder="Ask the AI agent..." style="flex: 1; padding: 6px; border-radius: 4px; border: 1px solid #ccc;">
                        <button class="btn" onclick="sendAIAgentMessage()">Send</button>
                    </div>
                </div>
                
                <h1>Due Diligence Dashboard</h1>
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>Assessments Overview</h3>
                        <div class="metric">
                            <span>Total Assessments:</span>
                            <span class="metric-value" id="totalAssessments">0</span>
                        </div>
                        <div class="metric">
                            <span>Completed:</span>
                            <span class="metric-value" id="completedAssessments">0</span>
                        </div>
                        <div class="metric">
                            <span>Average Score:</span>
                            <span class="metric-value" id="avgAssessmentScore">0</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Assessment Status</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Area</th>
                                <th>Status</th>
                                <th>Score</th>
                                <th>Issues</th>
                                <th>Owner</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Technical Architecture</td>
                                <td><span class="status status-green">Complete</span></td>
                                <td>85/100</td>
                                <td>2</td>
                                <td>Tech Lead</td>
                                <td><button class="btn" onclick="viewDetails('tech')">View</button></td>
                            </tr>
                            <tr>
                                <td>Security Assessment</td>
                                <td><span class="status status-green">Complete</span></td>
                                <td>92/100</td>
                                <td>1</td>
                                <td>Security Team</td>
                                <td><button class="btn" onclick="viewDetails('security')">View</button></td>
                            </tr>
                            <tr>
                                <td>Process Documentation</td>
                                <td><span class="status status-yellow">In Progress</span></td>
                                <td>70/100</td>
                                <td>5</td>
                                <td>BA Team</td>
                                <td><button class="btn" onclick="viewDetails('process')">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="addAssessment()">Add Assessment</button>
                    <button class="btn" onclick="generateReport()">Generate Report</button>
                </div>
                
                <div class="card">
                    <h3>Agentic AI</h3>
                    <p>AI-powered analysis and risk assessment tools for comprehensive due diligence evaluation.</p>
                    <button class="btn" onclick="openRiskAI()" style="background: #28a745;">Risk Agentic AI</button>
                </div>
                
                <div class="card">
                    <h3>Team Chat</h3>
                    <div id="ddChat" style="height: 200px; border: 1px solid #ddd; padding: 10px; overflow-y: auto; background: #f9f9f9; margin-bottom: 10px;">
                        <div><strong>Tech Lead:</strong> Security assessment completed</div>
                        <div><strong>BA Team:</strong> Process documentation 70% done</div>
                    </div>
                    <input type="text" id="ddChatInput" placeholder="Type message..." style="width: 80%; margin-right: 10px;">
                    <button class="btn" onclick="sendMessage('ddChat', 'ddChatInput')">Send</button>
                </div>
                
                <div class="card">
                    <h3>Document Repository</h3>
                    <table>
                        <thead>
                            <tr><th>Document</th><th>Type</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Technical Architecture Review</td>
                                <td>Assessment</td>
                                <td><span class="status status-green">Complete</span></td>
                                <td><button class="btn" onclick="viewDoc('tech-arch')">View</button></td>
                            </tr>
                            <tr>
                                <td>Security Audit Report</td>
                                <td>Report</td>
                                <td><span class="status status-yellow">Draft</span></td>
                                <td><button class="btn" onclick="editDoc('security')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="uploadDoc()">Upload Document</button>
                </div>
            </div>

            <!-- Knowledge Acquisition Module -->
            <div id="knowledge-acquisition" class="module">
                <h1>Knowledge Acquisition</h1>
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>Training Progress</h3>
                        <div class="metric">
                            <span>Technical Training</span>
                            <span class="metric-value">85%</span>
                        </div>
                        <div class="metric">
                            <span>Business Process</span>
                            <span class="metric-value">70%</span>
                        </div>
                        <div class="metric">
                            <span>Domain Knowledge</span>
                            <span class="metric-value">60%</span>
                        </div>
                        <button class="btn" onclick="scheduleTraining()">Schedule Training</button>
                    </div>
                    
                    <div class="card">
                        <h3>Knowledge Base</h3>
                        <div class="metric">
                            <span>Documents</span>
                            <span class="metric-value">156</span>
                        </div>
                        <div class="metric">
                            <span>Videos</span>
                            <span class="metric-value">24</span>
                        </div>
                        <div class="metric">
                            <span>Assessments</span>
                            <span class="metric-value">12</span>
                        </div>
                        <button class="btn" onclick="manageKnowledge()">Manage KB</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Learning Chat</h3>
                    <div id="kaChat" style="height: 200px; border: 1px solid #ddd; padding: 10px; overflow-y: auto; background: #f9f9f9; margin-bottom: 10px;">
                        <div><strong>Trainer:</strong> Next session on API integration tomorrow</div>
                        <div><strong>John:</strong> Can we get the presentation slides?</div>
                    </div>
                    <input type="text" id="kaChatInput" placeholder="Ask questions or share updates..." style="width: 80%; margin-right: 10px;">
                    <button class="btn" onclick="sendMessage('kaChat', 'kaChatInput')">Send</button>
                </div>
                
                <div class="card">
                    <h3>Training Calendar</h3>
                    <table>
                        <thead>
                            <tr><th>Date</th><th>Training</th><th>Trainer</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-25</td>
                                <td>System Architecture</td>
                                <td>Senior Architect</td>
                                <td><span class="status status-green">Complete</span></td>
                                <td><button class="btn" onclick="viewRecording('arch')">Recording</button></td>
                            </tr>
                            <tr>
                                <td>2024-01-30</td>
                                <td>Business Process</td>
                                <td>BA Lead</td>
                                <td><span class="status status-yellow">Scheduled</span></td>
                                <td><button class="btn" onclick="joinSession('bp')">Join</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="scheduleSession()">Schedule Session</button>
                </div>
                
                <div class="card">
                    <h3>Assessment Center</h3>
                    <div class="metric">
                        <span>Completed Assessments</span>
                        <span class="metric-value">8/12</span>
                    </div>
                    <div class="metric">
                        <span>Average Score</span>
                        <span class="metric-value">85%</span>
                    </div>
                    <button class="btn" onclick="takeAssessment()">Take Assessment</button>
                    <button class="btn" onclick="viewResults()">View Results</button>
                </div>
            </div>

            <!-- Shadow & Reverse Shadow Module -->
            <div id="shadow" class="module">
                <h1>Shadow & Reverse Shadow</h1>
                <div class="card">
                    <h3>Shadow Activities</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Activity</th>
                                <th>Phase</th>
                                <th>Progress</th>
                                <th>Shadower</th>
                                <th>Expert</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Production Support</td>
                                <td>Shadow</td>
                                <td>75%</td>
                                <td>John Doe</td>
                                <td>Expert A</td>
                                <td><button class="btn" onclick="updateShadow('prod')">Update</button></td>
                            </tr>
                            <tr>
                                <td>Incident Management</td>
                                <td>Reverse Shadow</td>
                                <td>60%</td>
                                <td>Jane Smith</td>
                                <td>Expert B</td>
                                <td><button class="btn" onclick="updateShadow('incident')">Update</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="assignShadow()">Assign Shadow</button>
                </div>
                
                <div class="card">
                    <h3>Shadow Chat</h3>
                    <div id="shadowChat" style="height: 200px; border: 1px solid #ddd; padding: 10px; overflow-y: auto; background: #f9f9f9; margin-bottom: 10px;">
                        <div><strong>Expert A:</strong> Great progress on production support today</div>
                        <div><strong>John:</strong> Thanks! Ready for reverse shadow phase</div>
                    </div>
                    <input type="text" id="shadowChatInput" placeholder="Discuss shadow activities..." style="width: 80%; margin-right: 10px;">
                    <button class="btn" onclick="sendMessage('shadowChat', 'shadowChatInput')">Send</button>
                </div>
                
                <div class="card">
                    <h3>Shadow Schedule</h3>
                    <table>
                        <thead>
                            <tr><th>Date</th><th>Time</th><th>Activity</th><th>Shadower</th><th>Expert</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-25</td>
                                <td>09:00</td>
                                <td>Incident Response</td>
                                <td>Jane Smith</td>
                                <td>Expert B</td>
                                <td><button class="btn" onclick="joinShadow('incident')">Join</button></td>
                            </tr>
                            <tr>
                                <td>2024-01-26</td>
                                <td>14:00</td>
                                <td>Change Management</td>
                                <td>Mike Johnson</td>
                                <td>Expert C</td>
                                <td><button class="btn" onclick="scheduleShadow('change')">Schedule</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="createShadowSession()">Create Session</button>
                </div>
                
                <div class="card">
                    <h3>Competency Tracker</h3>
                    <div class="metric">
                        <span>Technical Skills</span>
                        <span class="metric-value">78%</span>
                    </div>
                    <div class="metric">
                        <span>Process Knowledge</span>
                        <span class="metric-value">65%</span>
                    </div>
                    <div class="metric">
                        <span>Independence Level</span>
                        <span class="metric-value">72%</span>
                    </div>
                    <button class="btn" onclick="updateCompetency()">Update Skills</button>
                    <button class="btn" onclick="generateSkillReport()">Skill Report</button>
                </div>
            </div>

            <!-- Stabilization Module -->
            <div id="stabilization" class="module">
                <h1>Stabilization</h1>
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>System Health</h3>
                        <div class="metric">
                            <span>CPU Usage</span>
                            <span class="metric-value">65%</span>
                        </div>
                        <div class="metric">
                            <span>Memory Usage</span>
                            <span class="metric-value">72%</span>
                        </div>
                        <div class="metric">
                            <span>Disk Usage</span>
                            <span class="metric-value">45%</span>
                        </div>
                        <button class="btn" onclick="monitorSystem()">Monitor</button>
                    </div>
                    
                    <div class="card">
                        <h3>Performance Metrics</h3>
                        <div class="metric">
                            <span>Response Time</span>
                            <span class="metric-value">1.2s</span>
                        </div>
                        <div class="metric">
                            <span>Throughput</span>
                            <span class="metric-value">1500 req/min</span>
                        </div>
                        <div class="metric">
                            <span>Error Rate</span>
                            <span class="metric-value">0.2%</span>
                        </div>
                        <button class="btn" onclick="optimizePerformance()">Optimize</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Stabilization Chat</h3>
                    <div id="stabChat" style="height: 200px; border: 1px solid #ddd; padding: 10px; overflow-y: auto; background: #f9f9f9; margin-bottom: 10px;">
                        <div><strong>DevOps:</strong> System performance optimized</div>
                        <div><strong>Tech Lead:</strong> Memory usage reduced to 65%</div>
                    </div>
                    <input type="text" id="stabChatInput" placeholder="Discuss system issues..." style="width: 80%; margin-right: 10px;">
                    <button class="btn" onclick="sendMessage('stabChat', 'stabChatInput')">Send</button>
                </div>
                
                <div class="card">
                    <h3>Issue Tracker</h3>
                    <table>
                        <thead>
                            <tr><th>Issue ID</th><th>Priority</th><th>Component</th><th>Status</th><th>Assigned</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>STB-001</td>
                                <td>Critical</td>
                                <td>Database</td>
                                <td><span class="status status-red">Open</span></td>
                                <td>DBA Team</td>
                                <td><button class="btn" onclick="viewIssue('STB-001')">View</button></td>
                            </tr>
                            <tr>
                                <td>STB-002</td>
                                <td>High</td>
                                <td>API Gateway</td>
                                <td><span class="status status-yellow">In Progress</span></td>
                                <td>Backend Team</td>
                                <td><button class="btn" onclick="updateIssue('STB-002')">Update</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="createIssue()">Create Issue</button>
                    <button class="btn" onclick="generateStabReport()">Generate Report</button>
                </div>
                
                <div class="card">
                    <h3>Deployment Pipeline</h3>
                    <div class="metric">
                        <span>Build Status</span>
                        <span class="status status-green">Success</span>
                    </div>
                    <div class="metric">
                        <span>Test Coverage</span>
                        <span class="metric-value">87%</span>
                    </div>
                    <div class="metric">
                        <span>Last Deployment</span>
                        <span class="metric-value">2 hours ago</span>
                    </div>
                    <button class="btn" onclick="triggerDeploy()">Deploy</button>
                    <button class="btn" onclick="rollback()">Rollback</button>
                </div>
            </div>

            <!-- Steady Support Module -->
            <div id="steady-support" class="module">
                <h1>Steady Support</h1>
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>Ticket Management</h3>
                        <div class="metric">
                            <span>Open Tickets</span>
                            <span class="metric-value">23</span>
                        </div>
                        <div class="metric">
                            <span>Resolved Today</span>
                            <span class="metric-value">15</span>
                        </div>
                        <div class="metric">
                            <span>Avg Resolution Time</span>
                            <span class="metric-value">4.2h</span>
                        </div>
                        <button class="btn" onclick="createTicket()">Create Ticket</button>
                        <button class="btn" onclick="viewTickets()">View All</button>
                    </div>
                    
                    <div class="card">
                        <h3>Customer Satisfaction</h3>
                        <div class="metric">
                            <span>Overall Rating</span>
                            <span class="metric-value">4.2/5</span>
                        </div>
                        <div class="metric">
                            <span>Response Rating</span>
                            <span class="metric-value">4.5/5</span>
                        </div>
                        <div class="metric">
                            <span>Resolution Rating</span>
                            <span class="metric-value">4.0/5</span>
                        </div>
                        <button class="btn" onclick="viewFeedback()">View Feedback</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Support Channels</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <button class="btn" onclick="switchChannel('general')" id="generalBtn" style="background: #28a745;">General</button>
                        <button class="btn" onclick="switchChannel('critical')" id="criticalBtn">Critical</button>
                        <button class="btn" onclick="switchChannel('escalation')" id="escalationBtn">Escalation</button>
                    </div>
                    <div id="supportChat" style="height: 200px; border: 1px solid #ddd; padding: 10px; overflow-y: auto; background: #f9f9f9; margin-bottom: 10px;">
                        <div><strong>Support Lead:</strong> All systems operational</div>
                        <div><strong>Agent 1:</strong> Customer issue resolved - TKT-001</div>
                    </div>
                    <input type="text" id="supportChatInput" placeholder="Type message..." style="width: 80%; margin-right: 10px;">
                    <button class="btn" onclick="sendChannelMessage()">Send</button>
                </div>
                
                <div class="card">
                    <h3>Live Ticket Dashboard</h3>
                    <table>
                        <thead>
                            <tr><th>Ticket</th><th>Priority</th><th>Customer</th><th>Agent</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>TKT-101</td>
                                <td>High</td>
                                <td>Client A</td>
                                <td>John Doe</td>
                                <td><span class="status status-yellow">In Progress</span></td>
                                <td><button class="btn" onclick="takeTicket('TKT-101')">Take</button></td>
                            </tr>
                            <tr>
                                <td>TKT-102</td>
                                <td>Medium</td>
                                <td>Client B</td>
                                <td>Unassigned</td>
                                <td><span class="status status-red">Open</span></td>
                                <td><button class="btn" onclick="assignTicket('TKT-102')">Assign</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="refreshTickets()">Refresh</button>
                    <button class="btn" onclick="escalateTicket()">Escalate</button>
                </div>
                
                <div class="card">
                    <h3>Knowledge Base</h3>
                    <div class="metric">
                        <span>Articles</span>
                        <span class="metric-value">245</span>
                    </div>
                    <div class="metric">
                        <span>FAQs</span>
                        <span class="metric-value">89</span>
                    </div>
                    <div class="metric">
                        <span>Solutions</span>
                        <span class="metric-value">156</span>
                    </div>
                    <button class="btn" onclick="searchKB()">Search KB</button>
                    <button class="btn" onclick="addArticle()">Add Article</button>
                </div>
                
                <div class="card">
                    <h3>Agent Performance</h3>
                    <table>
                        <thead>
                            <tr><th>Agent</th><th>Tickets</th><th>Avg Time</th><th>Rating</th><th>Status</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>John Doe</td>
                                <td>12</td>
                                <td>3.2h</td>
                                <td>4.5/5</td>
                                <td><span class="status status-green">Online</span></td>
                            </tr>
                            <tr>
                                <td>Jane Smith</td>
                                <td>8</td>
                                <td>2.8h</td>
                                <td>4.7/5</td>
                                <td><span class="status status-yellow">Busy</span></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="viewAgentDetails()">View Details</button>
                </div>
            </div
            
            <!-- Reports Module -->
            <div id="reports" class="module">
                <h1>Reports</h1>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>Weekly Status Report (WSR)</h3>
                        <div class="metric">
                            <span>Last Generated</span>
                            <span class="metric-value">Jan 22, 2024</span>
                        </div>
                        <div class="metric">
                            <span>Recipients</span>
                            <span class="metric-value">12</span>
                        </div>
                        <div class="metric">
                            <span>Auto Send</span>
                            <span class="status status-green">Enabled</span>
                        </div>
                        <button class="btn" onclick="generateWSR()">Generate WSR</button>
                        <button class="btn" onclick="scheduleWSR()">Schedule</button>
                        <button class="btn" onclick="sendWSR()">Send Now</button>
                    </div>
                    
                    <div class="card">
                        <h3>Monthly Operations Report (MOR)</h3>
                        <div class="metric">
                            <span>Last Generated</span>
                            <span class="metric-value">Jan 1, 2024</span>
                        </div>
                        <div class="metric">
                            <span>Recipients</span>
                            <span class="metric-value">8</span>
                        </div>
                        <div class="metric">
                            <span>Auto Send</span>
                            <span class="status status-yellow">Scheduled</span>
                        </div>
                        <button class="btn" onclick="generateMOR()">Generate MOR</button>
                        <button class="btn" onclick="scheduleMOR()">Schedule</button>
                        <button class="btn" onclick="sendMOR()">Send Now</button>
                    </div>
                    
                    <div class="card">
                        <h3>Quarterly Business Review (QBR)</h3>
                        <div class="metric">
                            <span>Last Generated</span>
                            <span class="metric-value">Oct 1, 2023</span>
                        </div>
                        <div class="metric">
                            <span>Recipients</span>
                            <span class="metric-value">5</span>
                        </div>
                        <div class="metric">
                            <span>Auto Send</span>
                            <span class="status status-red">Disabled</span>
                        </div>
                        <button class="btn" onclick="generateQBR()">Generate QBR</button>
                        <button class="btn" onclick="scheduleQBR()">Schedule</button>
                        <button class="btn" onclick="sendQBR()">Send Now</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Report Templates</h3>
                    <table>
                        <thead>
                            <tr><th>Template</th><th>Type</th><th>Last Modified</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Standard WSR Template</td>
                                <td>WSR</td>
                                <td>Jan 15, 2024</td>
                                <td><span class="status status-green">Active</span></td>
                                <td><button class="btn" onclick="editTemplate('wsr')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Executive MOR Template</td>
                                <td>MOR</td>
                                <td>Dec 20, 2023</td>
                                <td><span class="status status-green">Active</span></td>
                                <td><button class="btn" onclick="editTemplate('mor')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Business QBR Template</td>
                                <td>QBR</td>
                                <td>Oct 1, 2023</td>
                                <td><span class="status status-yellow">Draft</span></td>
                                <td><button class="btn" onclick="editTemplate('qbr')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="createTemplate()">Create Template</button>
                </div>
                
                <div class="card">
                    <h3>Email Configuration</h3>
                    <div class="metric">
                        <span>SMTP Server</span>
                        <span class="metric-value">Configured</span>
                    </div>
                    <div class="metric">
                        <span>Email Lists</span>
                        <span class="metric-value">3 Active</span>
                    </div>
                    <div class="metric">
                        <span>Auto Trigger</span>
                        <span class="status status-green">Enabled</span>
                    </div>
                    <button class="btn" onclick="configureEmail()">Configure</button>
                    <button class="btn" onclick="testEmail()">Test Email</button>
                </div>
                
                <div class="card">
                    <h3>Report History</h3>
                    <table>
                        <thead>
                            <tr><th>Date</th><th>Report Type</th><th>Recipients</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Jan 22, 2024</td>
                                <td>WSR</td>
                                <td>12</td>
                                <td><span class="status status-green">Sent</span></td>
                                <td><button class="btn" onclick="viewReport('wsr-20240122')">View</button></td>
                            </tr>
                            <tr>
                                <td>Jan 15, 2024</td>
                                <td>WSR</td>
                                <td>12</td>
                                <td><span class="status status-green">Sent</span></td>
                                <td><button class="btn" onclick="resendReport('wsr-20240115')">Resend</button></td>
                            </tr>
                            <tr>
                                <td>Jan 1, 2024</td>
                                <td>MOR</td>
                                <td>8</td>
                                <td><span class="status status-green">Sent</span></td>
                                <td><button class="btn" onclick="downloadReport('mor-20240101')">Download</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Client Survey Module -->
            <div id="client-survey" class="module">
                <h1>Client Survey</h1>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>Due Diligence Feedback</h3>
                        <div class="metric">
                            <span>Average Rating</span>
                            <span class="metric-value">4.2/5</span>
                        </div>
                        <div class="metric">
                            <span>Responses</span>
                            <span class="metric-value">8</span>
                        </div>
                        <button class="btn" onclick="viewFeedback('due-diligence')">View Feedback</button>
                        <button class="btn" onclick="sendSurvey('due-diligence')">Send Survey</button>
                    </div>
                    
                    <div class="card">
                        <h3>Knowledge Acquisition Feedback</h3>
                        <div class="metric">
                            <span>Average Rating</span>
                            <span class="metric-value">4.5/5</span>
                        </div>
                        <div class="metric">
                            <span>Responses</span>
                            <span class="metric-value">12</span>
                        </div>
                        <button class="btn" onclick="viewFeedback('knowledge-acquisition')">View Feedback</button>
                        <button class="btn" onclick="sendSurvey('knowledge-acquisition')">Send Survey</button>
                    </div>
                    
                    <div class="card">
                        <h3>Shadow & Reverse Shadow Feedback</h3>
                        <div class="metric">
                            <span>Average Rating</span>
                            <span class="metric-value">4.0/5</span>
                        </div>
                        <div class="metric">
                            <span>Responses</span>
                            <span class="metric-value">6</span>
                        </div>
                        <button class="btn" onclick="viewFeedback('shadow')">View Feedback</button>
                        <button class="btn" onclick="sendSurvey('shadow')">Send Survey</button>
                    </div>
                    
                    <div class="card">
                        <h3>Stabilization Feedback</h3>
                        <div class="metric">
                            <span>Average Rating</span>
                            <span class="metric-value">3.8/5</span>
                        </div>
                        <div class="metric">
                            <span>Responses</span>
                            <span class="metric-value">4</span>
                        </div>
                        <button class="btn" onclick="viewFeedback('stabilization')">View Feedback</button>
                        <button class="btn" onclick="sendSurvey('stabilization')">Send Survey</button>
                    </div>
                    
                    <div class="card">
                        <h3>Steady Support Feedback</h3>
                        <div class="metric">
                            <span>Average Rating</span>
                            <span class="metric-value">4.3/5</span>
                        </div>
                        <div class="metric">
                            <span>Responses</span>
                            <span class="metric-value">15</span>
                        </div>
                        <button class="btn" onclick="viewFeedback('steady-support')">View Feedback</button>
                        <button class="btn" onclick="sendSurvey('steady-support')">Send Survey</button>
                    </div>
                </div>
                
                <div class="card">
                    <h3>Survey Templates</h3>
                    <table>
                        <thead>
                            <tr><th>Module</th><th>Template</th><th>Questions</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Due Diligence</td>
                                <td>DD Assessment Survey</td>
                                <td>8</td>
                                <td><span class="status status-green">Active</span></td>
                                <td><button class="btn" onclick="editSurvey('dd')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Knowledge Acquisition</td>
                                <td>Training Feedback</td>
                                <td>10</td>
                                <td><span class="status status-green">Active</span></td>
                                <td><button class="btn" onclick="editSurvey('ka')">Edit</button></td>
                            </tr>
                            <tr>
                                <td>Shadow Phase</td>
                                <td>Mentoring Survey</td>
                                <td>6</td>
                                <td><span class="status status-yellow">Draft</span></td>
                                <td><button class="btn" onclick="editSurvey('shadow')">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="btn" onclick="createSurvey()">Create Survey</button>
                </div>
                
                <div class="card">
                    <h3>Recent Feedback</h3>
                    <table>
                        <thead>
                            <tr><th>Date</th><th>Module</th><th>Client</th><th>Rating</th><th>Status</th><th>Actions</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Jan 22, 2024</td>
                                <td>Steady Support</td>
                                <td>Client A</td>
                                <td>5/5</td>
                                <td><span class="status status-green">Complete</span></td>
                                <td><button class="btn" onclick="viewResponse('ss-001')">View</button></td>
                            </tr>
                            <tr>
                                <td>Jan 20, 2024</td>
                                <td>Knowledge Acquisition</td>
                                <td>Client B</td>
                                <td>4/5</td>
                                <td><span class="status status-green">Complete</span></td>
                                <td><button class="btn" onclick="viewResponse('ka-002')">View</button></td>
                            </tr>
                            <tr>
                                <td>Jan 18, 2024</td>
                                <td>Due Diligence</td>
                                <td>Client C</td>
                                <td>3/5</td>
                                <td><span class="status status-yellow">Partial</span></td>
                                <td><button class="btn" onclick="followUp('dd-003')">Follow Up</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>Survey Analytics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number">4.2</div>
                            <div class="stat-label">Overall Rating</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">45</div>
                            <div class="stat-label">Total Responses</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">89%</div>
                            <div class="stat-label">Response Rate</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">12</div>
                            <div class="stat-label">Active Surveys</div>
                        </div>
                    </div>
                    <button class="btn" onclick="generateSurveyReport()">Generate Report</button>
                    <button class="btn" onclick="exportFeedback()">Export Data</button>
                </div>
            </div>
            
            <!-- API Endpoints Module -->
            <div id="api-endpoints" class="module">
                <h1>Consumer API Endpoints</h1>
                
                <div class="card">
                    <h3>API Server Status</h3>
                    <div class="metric">
                        <span>Server URL:</span>
                        <span class="metric-value">https://cognizant-neuro-transition-platform.vercel.app</span>
                    </div>
                    <div class="metric">
                        <span>Status:</span>
                        <span id="apiStatus" class="status status-red">Offline</span>
                    </div>
                    <button class="btn" onclick="checkApiStatus()">Check Status</button>
                    <button class="btn" onclick="startApiServer()">Start Server</button>
                </div>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <h3>Dashboard API</h3>
                        <p><strong>GET</strong> /api/dashboard</p>
                        <p>Returns overall statistics and KPIs</p>
                        <button class="btn" onclick="testApi('dashboard', 'GET')">Test API</button>
                        <div id="dashboard-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Due Diligence API</h3>
                        <p><strong>GET</strong> /api/assessments</p>
                        <p><strong>POST</strong> /api/assessments</p>
                        <p><strong>PUT</strong> /api/assessments/:id</p>
                        <button class="btn" onclick="testApi('assessments', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('assessments')">Test POST</button>
                        <div id="assessments-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Knowledge Acquisition API</h3>
                        <p><strong>GET</strong> /api/trainings</p>
                        <p><strong>POST</strong> /api/trainings</p>
                        <p><strong>PUT</strong> /api/trainings/:id</p>
                        <button class="btn" onclick="testApi('trainings', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('trainings')">Test POST</button>
                        <div id="trainings-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Shadow Activities API</h3>
                        <p><strong>GET</strong> /api/shadows</p>
                        <p><strong>POST</strong> /api/shadows</p>
                        <p><strong>PUT</strong> /api/shadows/:id</p>
                        <button class="btn" onclick="testApi('shadows', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('shadows')">Test POST</button>
                        <div id="shadows-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Stabilization API</h3>
                        <p><strong>GET</strong> /api/issues</p>
                        <p><strong>POST</strong> /api/issues</p>
                        <p><strong>PUT</strong> /api/issues/:id</p>
                        <button class="btn" onclick="testApi('issues', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('issues')">Test POST</button>
                        <div id="issues-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Support Tickets API</h3>
                        <p><strong>GET</strong> /api/tickets</p>
                        <p><strong>POST</strong> /api/tickets</p>
                        <p><strong>PUT</strong> /api/tickets/:id</p>
                        <button class="btn" onclick="testApi('tickets', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('tickets')">Test POST</button>
                        <div id="tickets-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Client Surveys API</h3>
                        <p><strong>GET</strong> /api/surveys</p>
                        <p><strong>POST</strong> /api/surveys</p>
                        <p><strong>PUT</strong> /api/surveys/:id</p>
                        <button class="btn" onclick="testApi('surveys', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('surveys')">Test POST</button>
                        <div id="surveys-result" class="api-result"></div>
                    </div>
                    
                    <div class="card">
                        <h3>Projects API</h3>
                        <p><strong>GET</strong> /api/projects</p>
                        <p><strong>POST</strong> /api/projects</p>
                        <button class="btn" onclick="testApi('projects', 'GET')">Test GET</button>
                        <button class="btn" onclick="showApiForm('projects')">Test POST</button>
                        <div id="projects-result" class="api-result"></div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>API Documentation</h3>
                    <table>
                        <thead>
                            <tr><th>Endpoint</th><th>Method</th><th>Description</th><th>Example</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>/api/dashboard</td>
                                <td>GET</td>
                                <td>Get dashboard statistics</td>
                                <td>curl https://cognizant-neuro-transition-platform.vercel.app/api/dashboard</td>
                            </tr>
                            <tr>
                                <td>/api/assessments</td>
                                <td>POST</td>
                                <td>Create new assessment</td>
                                <td>curl -X POST -H "Content-Type: application/json" -d '{"area":"Security"}' https://cognizant-neuro-transition-platform.vercel.app/api/assessments</td>
                            </tr>
                            <tr>
                                <td>/api/trainings</td>
                                <td>GET</td>
                                <td>Get all training sessions</td>
                                <td>curl https://cognizant-neuro-transition-platform.vercel.app/api/trainings</td>
                            </tr>
                            <tr>
                                <td>/api/tickets</td>
                                <td>PUT</td>
                                <td>Update support ticket</td>
                                <td>curl -X PUT -H "Content-Type: application/json" -d '{"status":"resolved"}' https://cognizant-neuro-transition-platform.vercel.app/api/tickets/TKT-001</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script>
        // Global data store
        const appData = {
            projects: JSON.parse(localStorage.getItem('projects') || '[{"id":"PRJ-001","name":"Banking System Transition","status":"active","progress":78,"startDate":"2024-01-01","endDate":"2024-06-30"}]'),
            assessments: JSON.parse(localStorage.getItem('assessments') || '[{"id":"ASS-001","projectId":"PRJ-001","area":"Technical Architecture","status":"complete","score":85,"issues":2,"owner":"Tech Lead"}]'),
            trainings: JSON.parse(localStorage.getItem('trainings') || '[{"id":"TRN-001","projectId":"PRJ-001","topic":"System Architecture","progress":85,"trainer":"Senior Architect","attendees":8}]'),
            shadows: JSON.parse(localStorage.getItem('shadows') || '[{"id":"SHD-001","projectId":"PRJ-001","activity":"Production Support","shadower":"John Doe","expert":"Expert A","progress":75}]'),
            issues: JSON.parse(localStorage.getItem('issues') || '[{"id":"ISS-001","projectId":"PRJ-001","title":"Database Performance","priority":"critical","status":"open","assignee":"DBA Team"}]'),
            tickets: JSON.parse(localStorage.getItem('tickets') || '[{"id":"TKT-001","projectId":"PRJ-001","title":"Login Issue","priority":"high","status":"in-progress","assignee":"John Doe","customer":"Client A"}]'),
            surveys: JSON.parse(localStorage.getItem('surveys') || '[{"id":"SUR-001","projectId":"PRJ-001","module":"due-diligence","rating":4.2,"responses":8,"client":"Client A"}]')
        };
        
        function saveData() {
            Object.keys(appData).forEach(key => {
                localStorage.setItem(key, JSON.stringify(appData[key]));
            });
        }
        
        function updateDashboard() {
            const project = appData.projects[0];
            const completedAssessments = appData.assessments.filter(a => a.status === 'complete').length;
            const totalIssues = appData.issues.length;
            const avgSurveyRating = appData.surveys.reduce((sum, s) => sum + s.rating, 0) / appData.surveys.length;
            
            // Update KPI cards
            document.querySelector('.kpi-card:nth-child(1) .kpi-value').textContent = project.progress + '%';
            document.querySelector('.kpi-card:nth-child(3) .kpi-value').textContent = totalIssues;
            
            // Update stats
            const stats = document.querySelectorAll('.stat-number');
            if (stats.length > 0) {
                stats[0].textContent = appData.assessments.length + appData.trainings.length + appData.shadows.length;
                stats[1].textContent = completedAssessments;
            }
        }
        
        // Check authentication and initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            initCharts();
            updateDashboard();
        });
        
        function checkAuth() {
            const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
            if (!user) {
                window.location.href = 'login.html';
                return;
            }
            document.getElementById('userInfo').innerHTML = `Welcome, ${user.name}<br>Role: ${user.role}`;
        }
        
        function logout() {
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        }

        function initCharts() {
            // Phase Progress Chart
            const phaseCtx = document.getElementById('phaseChart').getContext('2d');
            new Chart(phaseCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Due Diligence', 'Knowledge Acquisition', 'Shadow Phase', 'Stabilization', 'Steady Support'],
                    datasets: [{
                        data: [100, 85, 60, 30, 10],
                        backgroundColor: ['#28a745', '#ffc107', '#17a2b8', '#fd7e14', '#dc3545']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });

            // Performance Chart
            const perfCtx = document.getElementById('performanceChart').getContext('2d');
            new Chart(perfCtx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [{
                        label: 'Performance %',
                        data: [70, 75, 78, 82],
                        borderColor: '#007bff',
                        fill: false
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        }

        function showModule(moduleId) {
            document.querySelectorAll('.module').forEach(m => m.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(moduleId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function showModal(content) {
            document.getElementById('modalBody').innerHTML = content;
            document.getElementById('modal').style.display = 'block';
        }
        
        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        // Dashboard Functions
        function viewRisks() { alert('Opening Risk Management Dashboard...'); }
        function manageTeam() { alert('Opening Team Management Panel...'); }

        // Due Diligence Functions
        function addAssessment() {
            showModal(`
                <h3>Add Assessment</h3>
                <div class="form-group">
                    <label>Assessment Area:</label>
                    <input type="text" id="assessmentArea" placeholder="e.g., Database Review">
                </div>
                <div class="form-group">
                    <label>Owner:</label>
                    <select id="assessmentOwner"><option>Tech Lead</option><option>Security Team</option><option>BA Team</option><option>DevOps</option></select>
                </div>
                <div class="form-group">
                    <label>Priority:</label>
                    <select id="assessmentPriority"><option>High</option><option>Medium</option><option>Low</option></select>
                </div>
                <button class="btn" onclick="saveAssessment()">Save Assessment</button>
            `);
        }
        
        function saveAssessment() {
            const area = document.getElementById('assessmentArea').value;
            const owner = document.getElementById('assessmentOwner').value;
            const priority = document.getElementById('assessmentPriority').value;
            
            if (area) {
                const newAssessment = {
                    id: 'ASS-' + (appData.assessments.length + 1).toString().padStart(3, '0'),
                    projectId: 'PRJ-001',
                    area: area,
                    status: 'pending',
                    score: 0,
                    issues: 0,
                    owner: owner,
                    priority: priority,
                    createdDate: new Date().toISOString()
                };
                appData.assessments.push(newAssessment);
                saveData();
                updateDashboard();
                alert('Assessment added successfully!');
            }
            closeModal();
        }
        
        function generateReport() { 
            const assessments = appData.assessments;
            const completed = assessments.filter(a => a.status === 'complete').length;
            const avgScore = assessments.reduce((sum, a) => sum + a.score, 0) / assessments.length;
            alert(`Due Diligence Report:\nTotal Assessments: ${assessments.length}\nCompleted: ${completed}\nAverage Score: ${avgScore.toFixed(1)}`);
        }
        
        function viewDetails(type) { 
            const assessment = appData.assessments.find(a => a.area.toLowerCase().includes(type));
            if (assessment) {
                alert(`Assessment Details:\nArea: ${assessment.area}\nStatus: ${assessment.status}\nScore: ${assessment.score}\nOwner: ${assessment.owner}`);
            }
        }
        function openRiskAI() { window.open('https://ai-agent-analyzer.vercel.app/', '_blank'); }

        // Knowledge Acquisition Functions
        function scheduleTraining() {
            showModal(`
                <h3>Schedule Training</h3>
                <div class="form-group">
                    <label>Training Topic:</label>
                    <input type="text" id="trainingTopic" placeholder="Training topic">
                </div>
                <div class="form-group">
                    <label>Date:</label>
                    <input type="date" id="trainingDate">
                </div>
                <div class="form-group">
                    <label>Trainer:</label>
                    <input type="text" id="trainer" placeholder="Trainer name">
                </div>
                <button class="btn" onclick="saveTraining()">Schedule Training</button>
            `);
        }
        
        function saveTraining() {
            const topic = document.getElementById('trainingTopic').value;
            const date = document.getElementById('trainingDate').value;
            const trainer = document.getElementById('trainer').value;
            
            if (topic && date) {
                const newTraining = {
                    id: 'TRN-' + (appData.trainings.length + 1).toString().padStart(3, '0'),
                    projectId: 'PRJ-001',
                    topic: topic,
                    date: date,
                    trainer: trainer,
                    progress: 0,
                    status: 'scheduled'
                };
                appData.trainings.push(newTraining);
                saveData();
                updateDashboard();
                alert('Training scheduled successfully!');
            }
            closeModal();
        }
        
        function manageKnowledge() { 
            const totalDocs = appData.trainings.length * 3;
            alert(`Knowledge Base:\nDocuments: ${totalDocs}\nTraining Sessions: ${appData.trainings.length}`);
        }

        // Shadow Functions
        function assignShadow() {
            showModal(`
                <h3>Assign Shadow</h3>
                <div class="form-group">
                    <label>Activity:</label>
                    <input type="text" id="shadowActivity" placeholder="Activity name">
                </div>
                <div class="form-group">
                    <label>Shadower:</label>
                    <input type="text" id="shadower" placeholder="Team member">
                </div>
                <div class="form-group">
                    <label>Expert:</label>
                    <input type="text" id="expert" placeholder="Expert name">
                </div>
                <div class="form-group">
                    <label>Phase:</label>
                    <select id="shadowPhase"><option>Shadow</option><option>Reverse Shadow</option></select>
                </div>
                <button class="btn" onclick="saveShadow()">Assign Shadow</button>
            `);
        }
        
        function saveShadow() {
            const activity = document.getElementById('shadowActivity').value;
            const shadower = document.getElementById('shadower').value;
            const expert = document.getElementById('expert').value;
            const phase = document.getElementById('shadowPhase').value;
            
            if (activity && shadower && expert) {
                const newShadow = {
                    id: 'SHD-' + (appData.shadows.length + 1).toString().padStart(3, '0'),
                    projectId: 'PRJ-001',
                    activity: activity,
                    shadower: shadower,
                    expert: expert,
                    phase: phase,
                    progress: 0,
                    status: 'active'
                };
                appData.shadows.push(newShadow);
                saveData();
                updateDashboard();
                alert('Shadow assignment created successfully!');
            }
            closeModal();
        }
        
        function updateShadow(id) { 
            const shadow = appData.shadows.find(s => s.id === id || s.activity.toLowerCase().includes(id));
            if (shadow) {
                const newProgress = prompt(`Update progress for ${shadow.activity} (0-100):`, shadow.progress);
                if (newProgress !== null) {
                    shadow.progress = parseInt(newProgress) || 0;
                    saveData();
                    updateDashboard();
                    alert('Shadow progress updated!');
                }
            }
        }

        // Stabilization Functions
        function monitorSystem() { alert('Opening System Monitoring Dashboard...'); }
        function optimizePerformance() { alert('Running Performance Optimization...'); }

        // Support Functions
        function createTicket() {
            showModal(`
                <h3>Create Support Ticket</h3>
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" id="ticketTitle" placeholder="Ticket title">
                </div>
                <div class="form-group">
                    <label>Priority:</label>
                    <select id="ticketPriority"><option>High</option><option>Medium</option><option>Low</option></select>
                </div>
                <div class="form-group">
                    <label>Customer:</label>
                    <input type="text" id="ticketCustomer" placeholder="Customer name">
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="ticketDescription" rows="4" placeholder="Describe the issue"></textarea>
                </div>
                <button class="btn" onclick="saveTicket()">Create Ticket</button>
            `);
        }
        
        function saveTicket() {
            const title = document.getElementById('ticketTitle').value;
            const priority = document.getElementById('ticketPriority').value;
            const customer = document.getElementById('ticketCustomer').value;
            const description = document.getElementById('ticketDescription').value;
            
            if (title) {
                const newTicket = {
                    id: 'TKT-' + (appData.tickets.length + 1).toString().padStart(3, '0'),
                    projectId: 'PRJ-001',
                    title: title,
                    priority: priority.toLowerCase(),
                    customer: customer,
                    description: description,
                    status: 'open',
                    assignee: 'Unassigned',
                    createdDate: new Date().toISOString()
                };
                appData.tickets.push(newTicket);
                saveData();
                updateDashboard();
                alert('Support ticket created successfully!');
            }
            closeModal();
        }
        function viewTickets() { alert('Opening Ticket Management Dashboard...'); }
        function viewFeedback() { alert('Opening Customer Feedback Dashboard...'); }
        
        // Chat functionality
        function sendMessage(chatId, inputId) {
            const chatDiv = document.getElementById(chatId);
            const input = document.getElementById(inputId);
            const message = input.value.trim();
            if (message) {
                const newMsg = document.createElement('div');
                newMsg.innerHTML = `<strong>You:</strong> ${message}`;
                chatDiv.appendChild(newMsg);
                chatDiv.scrollTop = chatDiv.scrollHeight;
                input.value = '';
            }
        }
        
        // Due Diligence functions
        function viewDoc(docId) { alert(`Opening document: ${docId}`); }
        function editDoc(docId) { alert(`Editing document: ${docId}`); }
        function uploadDoc() { alert('Opening document upload dialog...'); }
        
        // Knowledge Acquisition functions
        function viewRecording(sessionId) { alert(`Playing recording: ${sessionId}`); }
        function joinSession(sessionId) { alert(`Joining session: ${sessionId}`); }
        function scheduleSession() { alert('Opening session scheduler...'); }
        function takeAssessment() { alert('Starting assessment...'); }
        function viewResults() { alert('Viewing assessment results...'); }
        
        // Shadow functions        function joinShadow(activityId) { alert(`Joining shadow activity: ${activityId}`); }
        function scheduleShadow(activityId) { alert(`Scheduling shadow: ${activityId}`); }
        function createShadowSession() { alert('Creating new shadow session...'); }
        function updateCompetency() { alert('Opening competency update form...'); }
        function generateSkillReport() { alert('Generating skill assessment report...'); }
        
        // Stabilization functions
        function viewIssue(issueId) { alert(`Viewing issue: ${issueId}`); }
        function updateIssue(issueId) { alert(`Updating issue: ${issueId}`); }
        function createIssue() {
            showModal(`
                <h3>Create Issue</h3>
                <div class="form-group">
                    <label>Title:</label>
                    <input type="text" id="issueTitle" placeholder="Issue title">
                </div>
                <div class="form-group">
                    <label>Priority:</label>
                    <select id="issuePriority"><option>Critical</option><option>High</option><option>Medium</option><option>Low</option></select>
                </div>
                <div class="form-group">
                    <label>Component:</label>
                    <input type="text" id="issueComponent" placeholder="System component">
                </div>
                <div class="form-group">
                    <label>Assignee:</label>
                    <input type="text" id="issueAssignee" placeholder="Team member">
                </div>
                <button class="btn" onclick="saveIssue()">Create Issue</button>
            `);
        }
        
        function saveIssue() {
            const title = document.getElementById('issueTitle').value;
            const priority = document.getElementById('issuePriority').value;
            const component = document.getElementById('issueComponent').value;
            const assignee = document.getElementById('issueAssignee').value;
            
            if (title) {
                const newIssue = {
                    id: 'ISS-' + (appData.issues.length + 1).toString().padStart(3, '0'),
                    projectId: 'PRJ-001',
                    title: title,
                    priority: priority.toLowerCase(),
                    component: component,
                    status: 'open',
                    assignee: assignee,
                                       createdDate: new Date().toISOString()
                };
                appData.issues.push(newIssue);
                saveData();
                updateDashboard();
                alert('Issue created successfully!');
            }
            closeModal();
        }
        
        function generateStabReport() { 
            const issues = appData.issues;
            const critical = issues.filter(i => i.priority === 'critical').length;
            const open = issues.filter(i => i.status === 'open').length;
            alert(`Stabilization Report:\nTotal Issues: ${issues.length}\nCritical: ${critical}\nOpen: ${open}`);
        }
        
        function triggerDeploy() { alert('Deployment triggered successfully!'); }
        function rollback() { alert('Rollback completed successfully!'); }
        
        // Steady Support functions
        let currentChannel = 'general';
        function switchChannel(channel) {
            currentChannel = channel;
            document.querySelectorAll('[id$="Btn"]').forEach(btn => btn.style.background = '#007bff');
            document.getElementById(channel + 'Btn').style.background = '#28a745';
            const chatDiv = document.getElementById('supportChat');
            chatDiv.innerHTML = `<div><strong>Switched to ${channel} channel</strong></div>`;
        }
        
        function sendChannelMessage() {
            const input = document.getElementById('supportChatInput');
            const message = input.value.trim();
            if (message) {
                const chatDiv = document.getElementById('supportChat');
                const newMsg = document.createElement('div');
                newMsg.innerHTML = `<strong>You [${currentChannel}]:</strong> ${message}`;
                chatDiv.appendChild(newMsg);
                chatDiv.scrollTop = chatDiv.scrollHeight;
                input.value = '';
            }
        }
        
        function takeTicket(ticketId) { alert(`Taking ticket: ${ticketId}`); }
        function assignTicket(ticketId) { alert(`Assigning ticket: ${ticketId}`); }
        function refreshTickets() { alert('Refreshing ticket list...'); }
        function escalateTicket() { alert('Escalating ticket...'); }
        function searchKB() { alert('Opening knowledge base search...'); }
        function addArticle() { alert('Adding new KB article...'); }
        function viewAgentDetails() { alert('Viewing agent performance details...'); }
        
        // Reports functions
        function generateWSR() { alert('Generating Weekly Status Report...'); }
        function scheduleWSR() { 
            showModal(`
                <h3>Schedule WSR</h3>
                <div class="form-group">
                    <label>Frequency:</label>
                    <select><option>Weekly - Monday</option><option>Weekly - Friday</option></select>
                </div>
                <div class="form-group">
                    <label>Time:</label>
                    <input type="time" value="09:00">
                </div>
                <div class="form-group">
                    <label>Recipients:</label>
                    <textarea rows="3" placeholder="email1@company.com, email2@company.com"></textarea>
                </div>
                <button class="btn" onclick="closeModal()">Schedule</button>
            `);
        }
        function sendWSR() { alert('Sending WSR via email...'); }
        
        function generateMOR() { alert('Generating Monthly Operations Report...'); }
        function scheduleMOR() {
            showModal(`
                <h3>Schedule MOR</h3>
                <div class="form-group">
                    <label>Frequency:</label>
                    <select><option>Monthly - 1st</option><option>Monthly - Last Day</option></select>
                </div>
                <div class="form-group">
                    <label>Time:</label>
                    <input type="time" value="10:00">
                </div>
                <div class="form-group">
                    <label>Recipients:</label>
                    <textarea rows="3" placeholder="executive@company.com, manager@company.com"></textarea>
                </div>
                <button class="btn" onclick="closeModal()">Schedule</button>
            `);
        }
        function sendMOR() { alert('Sending MOR via email...'); }
        
        function generateQBR() { alert('Generating Quarterly Business Review...'); }
        function scheduleQBR() {
            showModal(`
                <h3>Schedule QBR</h3>
                <div class="form-group">
                    <label>Frequency:</label>
                    <select><option>Quarterly - Q1</option><option>Quarterly - Q2</option><option>Quarterly - Q3</option><option>Quarterly - Q4</option></select>
                </div>
                <div class="form-group">
                    <label>Time:</label>
                    <input type="time" value="14:00">
                </div>
                <div class="form-group">
                    <label>Recipients:</label>
                    <textarea rows="3" placeholder="ceo@company.com, cto@company.com"></textarea>
                </div>
                <button class="btn" onclick="closeModal()">Schedule</button>
            `);
        }
        function sendQBR() { alert('Sending QBR via email...'); }
        
        function editTemplate(type) { alert(`Editing ${type.toUpperCase()} template...`); }
        function createTemplate() { alert('Creating new report template...'); }
        function configureEmail() { alert('Opening email configuration...'); }
        function testEmail() { alert('Sending test email...'); }
        function viewReport(reportId) { alert(`Viewing report: ${reportId}`); }
        function resendReport(reportId) { alert(`Resending report: ${reportId}`); }
        function downloadReport(reportId) { alert(`Downloading report: ${reportId}`); }
        
        // Client Survey functions
        function viewFeedback(module) {
            showModal(`
                <h3>${module.charAt(0).toUpperCase() + module.slice(1)} Feedback Summary</h3>
                <div class="metric">
                    <span>Excellent (5 stars):</span>
                    <span class="metric-value">60%</span>
                </div>
                <div class="metric">
                    <span>Good (4 stars):</span>
                    <span class="metric-value">25%</span>
                </div>
                <div class="metric">
                    <span>Average (3 stars):</span>
                    <span class="metric-value">10%</span>
                </div>
                <div class="metric">
                    <span>Poor (1-2 stars):</span>
                    <span class="metric-value">5%</span>
                </div>
                <h4>Recent Comments:</h4>
                <p>"Great communication throughout the process"</p>
                <p>"Could improve response time"</p>
                <button class="btn" onclick="closeModal()">Close</button>
            `);
        }
        
        function sendSurvey(module) {
            showModal(`
                <h3>Send ${module.charAt(0).toUpperCase() + module.slice(1)} Survey</h3>
                <div class="form-group">
                    <label>Client Email:</label>
                    <input type="email" id="surveyEmail" placeholder="client@company.com">
                </div>
                <div class="form-group">
                    <label>Survey Template:</label>
                    <select id="surveyTemplate">
                        <option>Standard Feedback Survey</option>
                        <option>Detailed Assessment</option>
                        <option>Quick Rating</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Custom Message:</label>
                    <textarea id="surveyMessage" rows="3" placeholder="Optional message to client"></textarea>
                </div>
                <button class="btn" onclick="saveSurvey('${module}')">Send Survey</button>
            `);
        }
        
        function saveSurvey(module) {
            const email = document.getElementById('surveyEmail').value;
            const template = document.getElementById('surveyTemplate').value;
            const message = document.getElementById('surveyMessage').value;
            
            if (email) {
                const newSurvey = {
                    id: 'SUR-' + (appData.surveys.length + 1).toString().padStart(3, '0'),
                    projectId: 'PRJ-001',
                    module: module,
                    client: email,
                    template: template,
                    status: 'sent',
                    rating: 0,
                    responses: 0,
                    sentDate: new Date().toISOString()
                };
                appData.surveys.push(newSurvey);
                saveData();
                alert('Survey sent successfully!');
            }
            closeModal();
        }
        
        function editSurvey(surveyType) {
            showModal(`
                <h3>Edit ${surveyType.toUpperCase()} Survey</h3>
                <div class="form-group">
                    <label>Survey Title:</label>
                    <input type="text" value="${surveyType} Feedback Survey">
                </div>
                <div class="form-group">
                    <label>Questions:</label>
                    <textarea rows="6" placeholder="1. How satisfied are you with...\n2. Rate the quality of...\n3. Any suggestions for improvement?"></textarea>
                </div>
                <div class="form-group">
                    <label>Rating Scale:</label>
                    <select>
                        <option>1-5 Stars</option>
                        <option>1-10 Scale</option>
                        <option>Excellent/Good/Fair/Poor</option>
                    </select>
                </div>
                <button class="btn" onclick="closeModal()">Save Survey</button>
            `);
        }
        
        function createSurvey() {
            showModal(`
                <h3>Create New Survey</h3>
                <div class="form-group">
                    <label>Module:</label>
                    <select>
                        <option>Due Diligence</option>
                        <option>Knowledge Acquisition</option>
                        <option>Shadow & Reverse Shadow</option>
                        <option>Stabilization</option>
                        <option>Steady Support</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Survey Name:</label>
                    <input type="text" placeholder="Survey name">
                </div>
                <div class="form-group">
                    <label>Questions:</label>
                    <textarea rows="5" placeholder="Enter survey questions"></textarea>
                </div>
                <button class="btn" onclick="closeModal()">Create Survey</button>
            `);
        }
        
        function viewResponse(responseId) {
            showModal(`
                <h3>Survey Response: ${responseId}</h3>
                <div class="metric">
                    <span>Overall Rating:</span>
                    <span class="metric-value">4/5</span>
                </div>
                <h4>Detailed Feedback:</h4>
                <p><strong>Q1:</strong> How satisfied are you with the service?</p>
                <p><strong>A1:</strong> Very satisfied, great communication</p>
                <p><strong>Q2:</strong> Any areas for improvement?</p>
                <p><strong>A2:</strong> Faster response times would be helpful</p>
                <button class="btn" onclick="closeModal()">Close</button>
            `);
        }
        
        function followUp(responseId) {
            showModal(`
                <h3>Follow Up: ${responseId}</h3>
                <div class="form-group">
                    <label>Follow-up Message:</label>
                    <textarea rows="4" placeholder="Thank you for your feedback. We'd like to discuss..."></textarea>
                </div>
                <div class="form-group">
                    <label>Action Required:</label>
                    <select>
                        <option>Schedule Call</option>
                        <option>Send Additional Survey</option>
                        <option>Escalate to Manager</option>
                    </select>
                </div>
                <button class="btn" onclick="closeModal()">Send Follow-up</button>
            `);
        }
        
        function generateSurveyReport() { alert('Generating comprehensive survey analytics report...'); }
        function exportFeedback() { alert('Exporting feedback data to CSV...'); }
        
        // API Endpoints functions
        const API_BASE = 'https://cognizant-neuro-transition-platform.vercel.app';
        
        function checkApiStatus() {
            fetch(`${API_BASE}/api/dashboard`)
                .then(response => {
                    if (response.ok) {
                        document.getElementById('apiStatus').textContent = 'Online';
                        document.getElementById('apiStatus').className = 'status status-green';
                    } else {
                        throw new Error('API not responding');
                    }
                })
                .catch(() => {
                    document.getElementById('apiStatus').textContent = 'Offline';
                    document.getElementById('apiStatus').className = 'status status-red';
                });
        }
        
        function startApiServer() {
            alert('API Server is deployed on Vercel:\nhttps://cognizant-neuro-transition-platform.vercel.app\n\nFor local development:\n1. Run: npm install\n2. Run: npm start\n3. Local server: http://localhost:3000');
        }
        
        function testApi(endpoint, method) {
            const url = `${API_BASE}/api/${endpoint}`;
            const resultDiv = document.getElementById(`${endpoint}-result`);
            
            fetch(url, { method: method })
                .then(response => response.json())
                .then(data => {
                    resultDiv.innerHTML = `<strong>Response:</strong><br><pre>${JSON.stringify(data, null, 2)}</pre>`;
                })
                .catch(error => {
                    resultDiv.innerHTML = `<strong>Error:</strong><br><pre>${error.message}</pre>`;
                });
        }
        
        function showApiForm(endpoint) {
            const forms = {
                assessments: `
                    <h3>Create Assessment</h3>
                    <div class="form-group">
                        <label>Area:</label>
                        <input type="text" id="api-area" placeholder="Assessment area">
                    </div>
                    <div class="form-group">
                        <label>Owner:</label>
                        <input type="text" id="api-owner" placeholder="Owner">
                    </div>
                    <button class="btn" onclick="postApiData('assessments', {area: document.getElementById('api-area').value, owner: document.getElementById('api-owner').value, projectId: 'PRJ-001', status: 'pending', score: 0})">Create</button>
                `,
                trainings: `
                    <h3>Create Training</h3>
                    <div class="form-group">
                        <label>Topic:</label>
                        <input type="text" id="api-topic" placeholder="Training topic">
                    </div>
                    <div class="form-group">
                        <label>Trainer:</label>
                        <input type="text" id="api-trainer" placeholder="Trainer name">
                    </div>
                    <button class="btn" onclick="postApiData('trainings', {topic: document.getElementById('api-topic').value, trainer: document.getElementById('api-trainer').value, projectId: 'PRJ-001', progress: 0})">Create</button>
                `,
                tickets: `
                    <h3>Create Ticket</h3>
                    <div class="form-group">
                        <label>Title:</label>
                        <input type="text" id="api-title" placeholder="Ticket title">
                    </div>
                    <div class="form-group">
                        <label>Priority:</label>
                        <select id="api-priority"><option>high</option><option>medium</option><option>low</option></select>
                    </div>
                    <button class="btn" onclick="postApiData('tickets', {title: document.getElementById('api-title').value, priority: document.getElementById('api-priority').value, projectId: 'PRJ-001', status: 'open'})">Create</button>
                `
            };
            
            showModal(forms[endpoint] || '<p>Form not available for this endpoint</p>');
        }
        
        function postApiData(endpoint, data) {
            fetch(`${API_BASE}/api/${endpoint}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(result => {
                document.getElementById(`${endpoint}-result`).innerHTML = `<strong>Created:</strong><br><pre>${JSON.stringify(result, null, 2)}</pre>`;
                closeModal();
            })
            .catch(error => {
                alert('Error: ' + error.message);
            });
        }

        function runDataCleaningAI(type) {
            const resultDiv = document.getElementById(type + '-result');
            resultDiv.innerHTML = '<span>Connecting to OpenAI...</span>';
            setTimeout(() => {
                // Simulate OpenAI response
                let aiOutput = '';
                if (type === 'ingestion') {
                    aiOutput = 'Ingestion complete. Data validated and preprocessed by OpenAI.';
                } else if (type === 'modeling') {
                    aiOutput = 'Modeling complete. Data transformed using OpenAI model.';
                } else if (type === 'consumption') {
                    aiOutput = 'Consumption complete. Data delivered in optimal format by OpenAI.';
                }
                resultDiv.innerHTML = `<strong>AI Result:</strong> ${aiOutput}`;
            }, 2000);
        }

        function initDataCleaningDashboard() {
            // Data Quality Trends Chart
            const qualityCtx = document.getElementById('qualityChart').getContext('2d');
            new Chart(qualityCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Quality Score',
                        data: [85, 88, 90, 92, 95, 98],
                        borderColor: '#28a745',
                        fill: false
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
            // Error Distribution Chart
            const errorCtx = document.getElementById('errorChart').getContext('2d');
            new Chart(errorCtx, {
                type: 'bar',
                data: {
                    labels: ['Missing', 'Invalid', 'Duplicate', 'Outlier'],
                    datasets: [{
                        label: 'Error Count',
                        data: [12, 7, 3, 2],
                        backgroundColor: ['#dc3545', '#ffc107', '#17a2b8', '#007bff']
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false }
            });
        }
        function refreshAIInsights() {
            const recommendations = [
                'Optimize ingestion pipeline for faster processing.',
                'Review flagged records for potential anomalies.',
                'Retrain model with latest data for improved accuracy.',
                'Implement additional validation rules for new data sources.'
            ];
            const aiList = document.getElementById('aiRecommendations');
            aiList.innerHTML = '';
            recommendations.sort(() => Math.random() - 0.5).slice(0, 3).forEach(r => {
                const li = document.createElement('li');
                li.textContent = r;
                aiList.appendChild(li);
            });
        }
        document.addEventListener('DOMContentLoaded', function() {
            // ...existing code...
            if (document.getElementById('due-diligence')) {
                updateDueDiligenceDashboard();
            }
        });

        function updateDueDiligenceDashboard() {
            const total = appData.assessments.length;
            const completed = appData.assessments.filter(a => a.status === 'complete').length;
            const avgScore = total > 0 ? (appData.assessments.reduce((sum, a) => sum + a.score, 0) / total).toFixed(1) : 0;
            document.getElementById('totalAssessments').textContent = total;
            document.getElementById('completedAssessments').textContent = completed;
            document.getElementById('avgAssessmentScore').textContent = avgScore;
        }
        function sendAIAgentMessage() {
            const chatDiv = document.getElementById('aiAgentChat');
            const input = document.getElementById('aiAgentInput');
            const userMsg = input.value.trim();
            if (userMsg) {
                const userDiv = document.createElement('div');
                userDiv.className = 'user-message';
                userDiv.innerHTML = `<strong>You:</strong> ${userMsg}`;
                chatDiv.appendChild(userDiv);
                setTimeout(() => {
                    const aiDiv = document.createElement('div');
                    aiDiv.className = 'ai-message';
                    aiDiv.innerHTML = `<strong>AI Agent:</strong> ${getAIAgentResponse(userMsg)}`;
                    chatDiv.appendChild(aiDiv);
                    chatDiv.scrollTop = chatDiv.scrollHeight;
                }, 1000);
                input.value = '';
                chatDiv.scrollTop = chatDiv.scrollHeight;
            }
        }
        function getAIAgentResponse(msg) {
            // Real data-driven AI responses
            if (msg.toLowerCase().includes('summary')) {
                const total = appData.assessments.length;
                const completed = appData.assessments.filter(a => a.status === 'complete').length;
                const avgScore = total > 0 ? (appData.assessments.reduce((sum, a) => sum + a.score, 0) / total).toFixed(1) : 0;
                return `Summary: Total Assessments: ${total}, Completed: ${completed}, Average Score: ${avgScore}`;
            } else if (msg.toLowerCase().includes('risk')) {
                const risks = appData.assessments.filter(a => a.issues > 0);
                if (risks.length > 0) {
                    return `Risks detected in ${risks.length} assessment(s): ${risks.map(r => r.area).join(', ')}.`;
                } else {
                    return 'No major risks detected in current assessments.';
                }
            } else if (msg.toLowerCase().includes('improve')) {
                const lowScores = appData.assessments.filter(a => a.score < 70);
                if (lowScores.length > 0) {
                    return `Improvement needed in: ${lowScores.map(l => l.area).join(', ')}.`;
                } else {
                    return 'All assessments are performing well. Keep up the good work!';
                }
            }
            // Fallback: show latest assessment details
            if (appData.assessments.length > 0) {
                const latest = appData.assessments[appData.assessments.length - 1];
                return `Latest Assessment: ${latest.area}, Status: ${latest.status}, Score: ${latest.score}, Owner: ${latest.owner}`;
            }
            return 'No assessment data available. Please add assessments to get started.';
        }
        
        function refreshPhaseAIInsights() {
            // Example AI-driven summary for phases
            const phaseData = [100, 85, 60, 30, 10];
            const phaseNames = ['Due Diligence', 'Knowledge Acquisition', 'Shadow Phase', 'Stabilization', 'Steady Support'];
            const completed = phaseNames.filter((_, i) => phaseData[i] === 100);
            const currentIdx = phaseData.findIndex(p => p < 100);
            const currentPhase = currentIdx !== -1 ? phaseNames[currentIdx] : 'All phases complete';
            let aiMsg = '';
            if (completed.length === 0) {
                aiMsg = 'Project is at the initial phase. Due Diligence is underway.';
            } else if (completed.length === phaseNames.length) {
                aiMsg = 'Congratulations! All transition phases are complete.';
            } else {
                aiMsg = `Completed: ${completed.join(', ') || 'None'}<br>Current Phase: <strong>${currentPhase}</strong> (${phaseData[currentIdx]}% complete)`;
                if (currentPhase === 'Due Diligence') {
                    aiMsg += '<br>AI Suggestion: Focus on gathering all required documentation and stakeholder alignment.';
                } else if (currentPhase === 'Knowledge Acquisition') {
                    aiMsg += '<br>AI Suggestion: Schedule key training sessions and knowledge transfers.';
                } else if (currentPhase === 'Shadow Phase') {
                    aiMsg += '<br>AI Suggestion: Ensure shadowing activities are tracked and feedback is collected.';
                } else if (currentPhase === 'Stabilization') {
                    aiMsg += '<br>AI Suggestion: Monitor system performance and address open issues promptly.';
                } else if (currentPhase === 'Steady Support') {
                    aiMsg += '<br>AI Suggestion: Maintain high support standards and review client feedback regularly.';
                }
            }
            document.getElementById('aiPhaseInsights').innerHTML = aiMsg;
        }
    </script>
</body>
</html>